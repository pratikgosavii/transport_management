{% extends 'base/base.html' %}



{% block title %}Submit{% endblock title %}

{% block head %}



<style>


    .menu-item {
        color: #FCC;
        padding: 3px;
      }

      .three-dots:after {
        cursor: pointer;
        color: #444;
        content: '\2807';
        font-size: 20px;
        padding: 0 5px;
      }

      a {
        text-decoration: none;
        color: white;
      }

      a div {
        padding: 2px;
      }


      .logged-in {
        color: orange;
        font-size: 21px;
      }




    table {
        border-collapse: separate;
        table-layout: fixed;
        width: 100%;
    }

    .text{
        margin : 0px 14px;
    }

    .form-control{
        height : calc(1.9rem + 2px) !important;
    }



    .cus{
        width:200px !important;
    }

    .cus1{
        width:100px !important;
    }

    .se{
        background-color : rgba(239, 239, 239, 0.3) !important;
    }




    fieldset {
        display: block;
        margin: 20px auto;
        padding: 15px;
        border: 0;
        border: 1px solid black;
        margin-top : 0px;
        margin-bottom : 7px;
        width : fit-content;
      }
      legend {
        display: table;
        min-width: 0px;
        max-width: 70%;
        position: relative;
        margin: auto;
        padding: 5px 20px;
        font-weight: bold;
        font-size: 14px;
        padding-top: 0px !important;
        text-align: center;
      }

      .card{
        font-size: 14px !important;
        font-weight: bold !important;
      }

      .card-body{
        padding-top: 3px !important;

      }

      hr{
        margin : 0px;
      }

      .content{
        padding-top: 8px !important;
      }


      .input-wrapper {
        position: relative;
      }

      input {
        border: 1px solid gray;
        border-radius: 6px;
        position: relative;
        width: 231px;
        margin: 10px;
        line-height: 6ex;
        padding-left: 14px;
        height: 46px;
      }


      .select2-selection{
        border: 1px solid gray !important;
        border-radius: 6px !important;
        position: relative !important;
        margin: 10px !important;
        line-height: 6ex !important;
        padding-left: 14px !important;
        height: 46px !important;
      }

    .select2-container--open .select2-dropdown {
        left: 10px;
        top: -7px;
    }


    .select2-search--dropdown{
    justify-items: center;
    justify-content: center;
    display: flex;
    }



    .select2-container--default .select2-selection--single .select2-selection__rendered {
        color: #444;
        line-height: 52px;
    }

    .select2-selection--single{
        height: 50px !important;
    }
    .select2-search__field{
        margin: 1px;
        margin-top: 5px;
    }

      select {
        border: 1px solid gray !important;
        border-radius: 6px !important;
        position: relative !important;
        width: 231px !important;
        margin: 10px !important;
        line-height: 6ex !important;
        padding-left: 14px !important;
        height: 46px !important;
      }

      label {
        position: absolute;
        top: 0.2ex;
        z-index: 1;
        left: 2em;
        background-color: white;
        padding: 0 5px;

      }


</style>


{% endblock %}

{% block breadcrumbs %}
{% endblock breadcrumbs %}

{% block content %}

<div>

    {{ form_error }}


</div>

<div class="row">
    <div class="col-lg-12">
        <div class="card" style="padding-top:0px;">

            <div class="card-body" style="padding-top:0px;">
                <!-- Credit Card -->
                <div id="pay-invoice">
                    <div class="card-body">

                        <div class="content" id="message_div" style="display: none">
                            <!-- Animated -->
                            <div class="animated fadeIn" id="message"></div>
                        </div>

                        <form action="#" onsubmit="myButton.disabled = true; return true;" id="mains" method="post" >
                            {% csrf_token %}

                            <div class="col-12">

                                {% if user.is_superuser %}

                            <h3 style="text-align: center;">  Add Builty <span style="color: #05386b;font-weight: 800;"> Admin </span> </h3>

                            {% else %}

                            <h3 style="text-align: center;">  Add Builty <span style="color: #05386b;font-weight: 800;"> {{ request.user.company.company_name }} </span> </h3>

                            {% endif %}

                            </div>

                            <br><br>

                            <div class="col-12" style="display:flex;">

                                <div class="col-6" style="border-right : 1px solid black">

                                <table style="width:100%;">

                                    <tr>

                                        <td>

                                                <div class="input-wrapper" style="display:flex;">
                                                    <label for="first">Builty No</label>
                                                    {{ form.builty_no }}
                                                  </div>
                                        </td>

                                        {% if request.user.is_superuser %}

                                            <td>

                                                <div class="input-wrapper" style="display:flex;">
                                                    <label for="first">User</label>
                                                    {{ form.user }}
                                                </div>

                                            </td>

                                        {% endif %}

                                    </tr>

                                    <tr>
                                        <td>

                                            <div class="input-wrapper" style="display:flex;">
                                                <label for="first">Consignor</label>
                                                <select name="consignor" class="sele" id="consignor" required="">
                                                    <option value="" selected="">---------</option>

                                                    {% for i in consignor_data %}
                                                        <option value="{{ i.id }}">{{ i.name }}</option>
                                                    {% endfor %}

                                                </select> <input type="button" data-toggle="modal" data-target="#myModal" style="width: 36px; padding: 1px; margin: 10px 0px;width: 36px;padding: 1px; margin: 10px 0px;background: #05386b;color: white;font-weight: bolder;font-size: 23px;text-align: center;line-height: 3px;" value="+">
                                            </div>

                                        </td>

                                        <td>

                                            <div class="input-wrapper" style="display:flex;">
                                                <label for="first">Article</label>
                                                <select name="article"  class="sele" id="article" required="">
                                                <option value="" selected="">---------</option>

                                                {% for i in article_data %}
                                                    <option value="{{ i.id }}">{{ i.name }}</option>
                                                {% endfor %}


                                                </select> <input type="button" data-toggle="modal" data-target="#myModal_article" style="width: 36px; padding: 1px; margin: 10px 0px;width: 36px;padding: 1px; margin: 10px 0px;background: #05386b;color: white;font-weight: bolder;font-size: 23px;text-align: center;line-height: 3px;" value="+">
                                            </div>
                                        </td>
                                    </tr>




                                    <tr>

                                        <td>

                                                <div class="input-wrapper" style="display:flex;">
                                                    <label for="first">Truck No</label>
                                                    {{ form.truck_details }} <input type="button" data-toggle="modal" data-target="#myModal_truck_details" style="width: 36px; padding: 1px; margin: 10px 0px;width: 36px;padding: 1px; margin: 10px 0px;background: #05386b;color: white;font-weight: bolder;font-size: 23px;text-align: center;line-height: 3px;" value="+">
                                                  </div>
                                        </td>

                                        <td>

                                                <div class="input-wrapper" style="display:flex;">
                                                    <label for="first">Truck Owner</label>
                                                    {{ form.truck_owner }} <input type="button" data-toggle="modal" data-target="#myModal_truck_owner" style="width: 36px; padding: 1px; margin: 10px 0px;width: 36px;padding: 1px; margin: 10px 0px;background: #05386b;color: white;font-weight: bolder;font-size: 23px;text-align: center;line-height: 3px;" value="+">
                                                  </div>

                                        </td>

                                    </tr>
                                    <tr>

                                        <td>

                                                <div class="input-wrapper" style="display:flex;">
                                                    <label for="first">From Station</label>
                                                    {{ form.station_from }} <input type="button" data-toggle="modal" data-target="#myModal_from_station" style="width: 36px; padding: 1px; margin: 10px 0px;width: 36px;padding: 1px; margin: 10px 0px;background: #05386b;color: white;font-weight: bolder;font-size: 23px;text-align: center;line-height: 3px;" value="+">
                                                  </div>

                                        </td>
                                        <td>

                                                <div class="input-wrapper" style="display:flex;">
                                                    <label for="first">To Desti</label>

                                                    {{ form.station_to }} <input type="button" data-toggle="modal" data-target="#myModal_station" style="width: 36px; padding: 1px; margin: 10px 0px;width: 36px;padding: 1px; margin: 10px 0px;background: #05386b;color: white;font-weight: bolder;font-size: 23px;text-align: center;line-height: 3px;" value="+">

                                                  </div>

                                        </td>


                                    </tr>

                                    <tr>

                                        <td>
                                            <div class="input-wrapper" style="display:flex;">
                                                <label for="first">Taluka</label>
                                                {{ form.taluka }}
                                                <input type="button" data-toggle="modal" data-target="#myModal_taluka"  style="width: 36px; padding: 1px; margin: 10px 0px;width: 36px;padding: 1px; margin: 10px 0px;background: #05386b;color: white;font-weight: bolder;font-size: 23px;text-align: center;line-height: 3px;" value="+">
                                              </div>
                                        </td>
                                        <td>

                                                <div class="input-wrapper" style="display:flex;">
                                                    <label for="first">District</label>
                                                    {{ form.district }} <input type="button" data-toggle="modal" data-target="#myModal_district"  style="width: 36px; padding: 1px; margin: 10px 0px;width: 36px;padding: 1px; margin: 10px 0px;background: #05386b;color: white;font-weight: bolder;font-size: 23px;text-align: center;line-height: 3px;" value="+">
                                                  </div>

                                        </td>


                                    </tr>



                                    <tr>
                                        <td>

                                                <div class="input-wrapper" style="display:flex;">
                                                    <label for="first">Consignee</label>
                                                    {{ form.consignee }}
                                                  </div>

                                        </td>

                                        <td>


                                            <div class="input-wrapper" style="display:flex;">
                                                <label for="first">Onaccount</label>
                                                <select name="onaccount" id="onaccount" class="sele" required="">
                                                    <option value="" selected="">---------</option>


                                                    {% for i in onaccount_data %}
                                                        <option value="{{ i.id }}">{{ i.name }}</option>
                                                    {% endfor %}
                                                </select> <input type="button" data-toggle="modal" data-target="#myModal_onaccount" style="width: 36px; padding: 1px; margin: 10px 0px;width: 36px;padding: 1px; margin: 10px 0px;background: #05386b;color: white;font-weight: bolder;font-size: 23px;text-align: center;line-height: 3px;" value="+">
                                            </div>

                                    </td>
                                    </tr>

                                    <tr>

                                        <td>

                                                <div class="input-wrapper" style="display:flex;">
                                                    <label for="first">Date</label>
                                                    {{ form.DC_date }}

                                                  </div>



                                        </td>

                                        <td>

                                            <div class="input-wrapper" style="display:flex;">
                                                <label for="first">Mobile No</label>
                                                {{ form.mobile_no }}

                                              </div>


                                        </td>

                                    </tr>



                                </table>

                            </div>

                            <div class="col-6">



                                    <div class="col-6">

                                        <div style="display: flex;
                                        column-gap: 7px;margin-bottom: 4px;">

                                            <div class="input-wrapper" style="display:flex;">
                                                <label for="first">Qty (bags)</label>
                                                {{ form.bags }}
                                              </div>

                                              <div class="input-wrapper" style="display:flex;">
                                                <label for="first">MT</label>
                                                {{ form.mt }} {% if request.user.username == "deepak" %} <input type="checkbox" name="gender" style="width: 15px;" onclick="adjust_mt()" id="deepak" value="" /> {% endif %}
                                              </div>

                                        </div>

                                        <div style="display: flex;
                                        column-gap: 7px;margin-bottom: 4px;">


                                            <div class="input-wrapper" style="display:flex;">
                                                <label for="first">Delivery No</label>
                                                {{ form.delivery_no }}
                                              </div>

                                            <div class="input-wrapper" style="display:flex;">
                                                <label for="first">Note</label>
                                                {{ form.note }}
                                              </div>

                                        </div>

                                        <div style="display: flex;
                                        column-gap: 7px;margin-bottom: 0px;margin-top: 14px;">


                                            <div class="input-wrapper" style="display:flex;">
                                                <label for="first">EX/For</label>
                                                {{ form.ex_for }}
                                              </div>



                                            <div class="input-wrapper" style="display:flex;">
                                                <label for="first">Mode</label>
                                                {{ form.mode }}
                                              </div>

                                        </div>



                                        <div>

                                            <fieldset><legend>Payment Details</legend>


                                                <div style="display: flex;
                                                column-gap: 7px;margin-bottom: 4px;">



                                                      <div class="input-wrapper" style="display:flex;">
                                                        <label for="first">Rate</label>
                                                        {{ form.rate }}
                                                      </div>

                                                    <div class="input-wrapper" style="display:flex;">
                                                        <label for="first">Freight</label>
                                                        {{ form.freight }}
                                                      </div>

                                                </div>

                                                <div style="display: flex;
                                                column-gap: 7px;margin-bottom: 4px;">

                                                    <div class="input-wrapper" style="display:flex;">
                                                        <label for="first"> Less Advance</label>
                                                        {{ form.less_advance }}
                                                      </div>

                                                      <div class="input-wrapper" style="display:flex;">
                                                        <label for="first">Petrol Pump</label>
                                                        {{ form.petrol_pump }}
                                                      </div>
                                                </div>

                                                <div style="display: flex;
                                                column-gap: 7px;margin-bottom: 4px;">

                                                    <div class="input-wrapper" style="display:flex;">
                                                        <label for="first">Balance</label>
                                                        {{ form.balance }}
                                                      </div>

                                                    <div class="input-wrapper" style="display:flex;">
                                                        <label for="first">Diesel</label>
                                                        {{ form.diesel }}
                                                      </div>


                                                </div>
                                        </fieldset>


                                        </div>
                                    </div>

                                </div>
                            </div>
<br>



                            <div style="display: flex;
                            gap: 75px;justify-content: center;">

                                <button id="myButton" type="submit" name="myButton" style="height: 44px;
                                width: 300px;
                                background: #05386b;
                                border: none;
                                color: white;
                                font-weight: bold;
                                font-size: 14px;">
                                    <span id="payment-button-amount">Create Builty</span>
                                </button>

                                <p style="color: black;
                                font-weight: bold;"> GODOWN MT :- {{ total_godown_mt_today }} </p>

                                <p style="color: black;
                                font-weight: bold;"> R/H MT :- {{ total_railhead_mt_today }} </p>

                                <p style="color: black;
                                font-weight: bold;"> Total MT :- {{ total_mt_today }} </p>
                            </div>
                        </form>
                    </div>
                </div>

            </div>
        </div> <!-- .card -->

        <div class="card">
            <div class="card-body">
                <h4 class="box-title">Builty List </h4>
            </div>


            <div class="card-body--">
                <div class="table-stats order-table ov-h">
                    <table class="table ">
                        <thead>
                            <tr>
                                <th class="serial">#</th>
                                <th>Builty No</th>
                                <th>Truck No</th>
                                <th>From</th>
                                <th>To</th>
                                <th>Taluka</th>
                                <th>Consigne</th>
                                <th>Account</th>
                                <th>Article</th>
                                <th>Less Advance</th>
                                <th>MT</th>




                                <th>#</th>

                            </tr>
                        </thead>
                        <tbody>
                            {% if data %}
                            {% for i in data %}

                              {% if i.have_ack.all.0 %}

                                <tr style="background: #ffd78f;">

                              {% else %}

                                <tr>

                              {% endif %}


                                <td class="serial" style=""> {{ forloop.counter }}</td>



                                <td>{{ i.builty_no }}</td>
                                <td>{{ i.truck_details }}</td>
                                <td>{{ i.station_from }}</td>
                                <td>{{ i.station_to }}</td>
                                <td>{{ i.taluka }}</td>
                                <td>{{ i.consignee }}</td>
                                <td>{{ i.onaccount }}</td>
                                <td>{{ i.article }}</td>
                                <td>{{ i.less_advance }}</td>
                                <td>{{ i.mt }}</td>




                                <td style="display: flex; gap: 11px;height: 86px;">

                                  {% if request.user.office_location.name == "AKOLA" %}

                                    <a href="{% url 'generate_bill_akola' i.id %}"><button style="background-color: #05386b; border: green; padding: 10px;border-radius: 12px;" type="button" class="btn-info ">
                                      <span id="payment-button-amount">Print</span>
                                    </button>  </a>

                                  {% else %}

                                    <a href="{% url 'generate_bill' i.id %}"><button style="background-color: #05386b; border: green; padding: 10px;border-radius: 12px;" type="button" class="btn-info ">
                                        <span id="payment-button-amount">Print</span>
                                    </button>  </a>

                                  {% endif %}


                                    <a href="{% url 'update_builty' i.id %}"><button style="background-color: #05386b; border: green; padding: 10px;border-radius: 12px;" type="button" class="btn-info ">
                                        <span id="payment-button-amount">View</span>
                                    </button>  </a>

                                    <button onclick="if(confirm('Are you sure you want to delete this transaction?')) { window.location.href='{% url 'delete_transaction' i.id %}'; } return false;" style="background-color: red; border: green; padding: 10px;border-radius: 12px;" type="button" class="btn-info ">
                                        <span id="payment-button-amount">Delete</span>
<<<<<<< HEAD
                                    </button>  </a>


=======
                                    </button>
                                    
                                   
>>>>>>> fe1c31eae1cf9e54099782db3b6ed73ee83e19e9


                                </td>


                            </tr>
                            {% endfor %}
                            {% else %}
                                <tr><td>No Product Data</td></tr>
                            {% endif %}
                        </tbody>
                    </table>
                    <footer class="site-footer">
                      <div class="footer-inner bg-white" style="float: right;">
                          <div class="row" style="float: right;">
                              <p style="font-weight: 700;
                              color: black;;margin-left:30px;border : 1px solid grey;padding : 10px;"> Total MT : {{ total_mt_today }}</p>
                              <p style="font-weight: 700;
                              color: black;;margin-left:30px;border : 1px solid grey;padding : 10px;"> Total Freight : {{ total_freight }} </p>
                              <p style="font-weight: 700;
                              color: black;margin-left:30px;border : 1px solid grey;padding : 10px;">  Advance : {{ total_advance }} RS</p><br>
                              <p style="font-weight: 700;
                              color: black;;margin-left:30px;border : 1px solid grey;padding : 10px;">  Balance : {{ total_balance }} RS</p>
                            </div>


                          <div class="row" style="float: left; width : 100%">


                          <button style="background-color: #05386b; border: green; padding: 10px;border-radius: 12px;" class="btn-info" onclick="mass_edit_request();" > Submit </button>

                        </div>
                        </div>
                  </footer>






                </div> <!-- /.table-stats -->
            </div>
        </div> <!-- /.card -->



    </div><!--/.col-->
</div>


<!-- ====================== card ================================= -->

<!-- ====================== consignor ================================= -->


    <div class="modal fade" id="myModal" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Add Consignor</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body">

                    <ul style="padding-left: 18px;color: red;" id="consignor_form_error">

                    </ul>


                    <form id="consignor_form">

                        <input type="hidden" id="builty_id">

                        {% if user.is_superuser %}

                        <div class="input-wrapper" style="display:flex;">
                            <label for="first"> Company Name</label>
                        {{ form.company }}

                        {% endif %}


                        </div>

                        <div class="input-wrapper" style="display:flex;">
                            <label for="first">Builty Code</label>
                            <input type="text"name="builty_code" id="consignor_builty_code" class="cus" required="">
                        </div>

                        <div class="input-wrapper" style="display:flex;">
                            <label for="first">Consignor Name</label>
                            <input type="text"name="name" id="consignor_name" class="cus" required="">
                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>

<!-- ====================== consignor end ================================= -->



<!-- ====================== article ================================= -->


    <div class="modal fade" id="myModal_article" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Add Article</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">

                    <ul style="padding-left: 18px;color: red;" id="article_form_error">

                    </ul>


                    <form id="article_form">


                        {% if user.is_superuser %}




                        <div class="input-wrapper" style="display:flex;">
                            <label for="first">Company Name</label>

                            <select name="company_name" name="company_name" id="article_company" required="">
                                <option value="" selected="">---------</option>

                                {% for i in company_data %}

                                <option value="{{ i.id }}"> {{ i.company_name }} </option>

                                {% endfor %}


                              </select>
                        </div>

                        {% endif %}


                        {% if user.is_superuser %}

                            <div class="input-wrapper" style="display:flex;">
                                <label for="first">Consignor Name</label>
                                <select name="consignor" class="sele" id="article_consignor" required="">
                                    <option value="" selected="">---------</option>
                                </select>

                            </div>

                        {% else %}

                            <div class="input-wrapper" style="display:flex;">
                                <label for="first">Consignor Name</label>
                                <select name="consignor" class="sele" id="consignor_Sdsd" required="">
                                    <option value="" selected="">---------</option>

                                    {% for i in consignor_data %}
                                        <option value="{{ i.id }}">{{ i.name }}</option>
                                    {% endfor %}

                                </select>
                            </div>

                        {% endif %}



                        <div class="input-wrapper" style="display:flex;">
                            <label for="first">Article Name</label>
                            <input type="text" name="name" id="article_name" class="cus" required="">
                        </div>


                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>

<!-- ====================== article end ================================= -->



<!-- ====================== truck_details ================================= -->


<div class="modal fade" id="myModal_truck_details" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add Truck Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <ul style="padding-left: 18px;color: red;" id="truck_details_form_error">

                </ul>

                <form id="truck_details_form">

                    <div class="input-wrapper" style="display:flex;">
                            <label for="first">Consignor Name</label>
                        {{ form_truck_details.company }}
                    </div>

                    <div class="input-wrapper" style="display:flex;">
                        <label for="first">Truck Number</label>

                        {{ form_truck_details.truck_number }}
                    </div>

                    <div class="input-wrapper" style="display:flex;">
                        <label for="first">Truck Owner</label>
                        {{ form_truck_details.truck_owner }}
                    </div>

                    <div class="input-wrapper" style="display:flex;">
                        <label for="first">Insurance Number</label>
                        {{ form_truck_details.insurance_number }}
                    </div>

                    <div class="input-wrapper" style="display:flex;">
                        <label for="first">Permit Number</label>
                        {{ form_truck_details.permit_number }}
                    </div>

                    <div class="input-wrapper" style="display:flex;">
                        <label for="first">PUC Number</label>
                        {{ form_truck_details.puc_number }}
                    </div>

                    <div class="input-wrapper" style="display:flex;">
                        <label for="first">Fitness</label>
                        {{ form_truck_details.fitness }}
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>

<!-- ====================== truck_details end ================================= -->




<!-- ====================== truck_owner ================================= -->


<div class="modal fade" id="myModal_truck_owner" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add Truck Owner</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <ul style="padding-left: 18px;color: red;" id="truc_owner_Form_error">

                </ul>

                <form id="truc_owner_Form">


                    <div class="input-wrapper" style="display:flex;">
                        <label for="first">Owner Name</label>
                        {{ form_truck_owner.owner_name }}
                    </div>

                    <div class="input-wrapper" style="display:flex;">
                        <label for="first">Bank Acc No</label>
                        {{ form_truck_owner.bank_acc }}
                    </div>

                    <div class="input-wrapper" style="display:flex;">
                        <label for="first">Pan Card No</label>
                        {{ form_truck_owner.pan_card }}
                    </div>

                    <div class="input-wrapper" style="display:flex;">
                        <label for="first">Address</label>
                        {{ form_truck_owner.address }}
                    </div>
                    <div class="input-wrapper" style="display:flex;">
                        <label for="first">Mobile No</label>
                        {{ form_truck_owner.mobile_number }}
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>

<!-- ====================== truck_owners end ================================= -->



<!-- ====================== station ================================= -->


<div class="modal fade" id="myModal_station" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add Station</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <ul style="padding-left: 18px;color: red;" id="station_Form_error">

                </ul>


                <form id="station_Form">



                            <div class="input-wrapper" style="display:flex;">
                                <label for="first">Taluka</label>
                                {{ station_Form.taluka }}
                            </div>

                            <div class="input-wrapper" style="display:flex;">
                                <label for="first">Station name</label>
                                {{ station_Form.name }}
                            </div>



                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </form>

            </div>
        </div>
    </div>taluk
</div>

<div class="modal fade" id="myModal_from_station" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add Station</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <ul style="padding-left: 18px;color: red;" id="from_station_Form_error">

                </ul>


                <form id="from_station_Form">




                            <div class="input-wrapper" style="display:flex;">
                                <label for="first">Taluka</label>
                                {{ from_form_station.taluka }}
                            </div>

                            <div class="input-wrapper" style="display:flex;">
                                <label for="first">Station name</label>
                                {{ from_form_station.name }}
                            </div>



                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>

<!-- ====================== station end ================================= -->



<!-- ====================== taluka ================================= -->


<div class="modal fade" id="myModal_taluka" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add Taluka</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">


                <ul style="padding-left: 18px;color: red;" id="taluka_form_error">

                </ul>


                <form id="taluka_form">




                    <div class="input-wrapper" style="display:flex;">
                        <label for="first"> District Name</label>
                        {{ form_taluka.district }}
                    </div>

                    <div class="input-wrapper" style="display:flex;">
                        <label for="first"> Taluka Name </label>
                        {{ form_taluka.name }}
                    </div>


                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>

<!-- ====================== taluka end ================================= -->

<!-- ====================== distirct ================================= -->


<div class="modal fade" id="myModal_district" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add District</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">





                <ul style="padding-left: 18px;color: red;" id="district_form_error">

                </ul>


                <form id="district_form">




                            <div class="input-wrapper" style="display:flex;">
                                <label for="first">District name</label>
                                {{ form_district.name }}
                            </div>



                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>


<!-- ====================== onaccount ================================= -->


<div class="modal fade" id="myModal_onaccount" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Add Onaccount</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <ul style="padding-left: 18px;color: red;" id="onaccount_Form_error">

                </ul>

                <form id="onaccount_Form">



                    {% if user.is_superuser %}

                    <div class="input-wrapper" style="display:flex;">
                        <label for="first"> Company Name</label>
                        {{ form_onaccount.company }}
                    </div>

                    {% endif %}

                    <div class="input-wrapper" style="display:flex;">
                        <label for="first"> Onaccount Name </label>
                        {{ form_onaccount.name }}
                    </div>


                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>

<!-- ====================== onaccount end ================================= -->


    {% endblock content %}


    {% block js %}

<script>


    $("#article_company").change(function () {

        const comapnyID = $(this).val();  // get the selected subject ID from the HTML dropdown list
        $.ajax({                       // initialize an AJAX request
            type: "POST",
            url: "{% url 'get_consignor_ajax' %}",
            data: {
                'company_id': comapnyID,       // add the country id to the POST parameters
                'csrfmiddlewaretoken':$('input[name=csrfmiddlewaretoken]').val(),
            },
            success: function (data) {   // `data` is from `get_topics_ajax` view function
                let html_data = '<option value="" selected disabled>------------</option>';
                data.forEach(function (data) {

                    html_data += `<option value="${data.id}" >${data.name}</option>`
                });
                $("#article_consignor").html(html_data); // replace the contents of the topic input with the data that came from the server
            }
        });
    });






    $("#taluka").change(function () {
        talukaid = ($(this).val());




        $.ajax({
            cache: false,                    // initialize an AJAX request
            type: "POST",
            url: "{% url 'get_district' %}",
            data: { 'csrfmiddlewaretoken':$('input[name=csrfmiddlewaretoken]').val(), 'taluka_id' : talukaid },     // add the country id to the POST parameters

            success: function (data) {   // `data` is from `get_topics_ajax` view function

                    console.log('------------------------')
                    console.log(data)


                    var a = JSON.parse(data.data)


                    let_html = '<option value="' + a[0].pk + '" selected>' + a[0].fields.name + '</option>'

                    $('#district').html(let_html);



            }

        });


    });



    $("#truck_details").change(function () {
        truckid = ($(this).val());

        $('#station_from').select2('open');


        $.ajax({
            cache: false,                    // initialize an AJAX request
            type: "POST",
            url: "{% url 'get_owner' %}",
            data: { 'csrfmiddlewaretoken':$('input[name=csrfmiddlewaretoken]').val(), 'truck_id' : truckid },     // add the country id to the POST parameters

            success: function (data) {   // `data` is from `get_topics_ajax` view function

                    console.log('------------------------')
                    console.log(data)


                    var a = JSON.parse(data.data)


                    let_html = '<option value="' + a[0].pk + '" selected>' + a[0].fields.owner_name + '</option>'

                    $('#truck_owner').append(let_html);



            }

        });


    });

    $("#station_to").change(function () {
        stationid = ($(this).val());


        $.ajax({
            cache: false,                    // initialize an AJAX request
            type: "POST",
            url: "{% url 'get_taluka_district' %}",
            data: { 'csrfmiddlewaretoken':$('input[name=csrfmiddlewaretoken]').val(), 'station_id' : stationid },     // add the country id to the POST parameters

            success: function (data) {   // `data` is from `get_topics_ajax` view function

                    console.log('------------------------')
                    console.log(data)


                    var a = JSON.parse(data.data)


                    let_html = '<option value="' + a[0].pk + '" selected>' + a[0].fields.name + '</option>'

                    $('#taluka').html(let_html);


                    document.getElementById('district').value = a[0].fields.district;


                    document.getElementById("consignee").focus();


            }

        });



    });




    $("#consignor").change(function () {
        consignorid = ($(this).val());

        $('#article').select2('open');

        $.ajax({
            cache: false,                    // initialize an AJAX request
            type: "POST",
            url: "{% url 'get_buily_code' %}",
            data: { 'csrfmiddlewaretoken':$('input[name=csrfmiddlewaretoken]').val(), 'consignor_id' : consignorid },     // add the country id to the POST parameters

            success: function (data) {   // `data` is from `get_topics_ajax` view function

                    console.log('------------------------')
                    console.log(data)


                    var a = JSON.parse(data)

                    console.log(a)



                    document.getElementById('builty_no').value = a.builty_code;


            }

        });


    });




    document.getElementById('consignor_form').addEventListener('submit', function(evt){

        evt.preventDefault();

        var data = $('#consignor_form').serialize();
        console.log(data)

        $.ajax({
            type: "POST",
            url: "{% url 'add_consignor_ajax' %}",
            data : $(this).serialize(),
            success: function (data) {   // `data` is from `get_topics_ajax` view function
                var data = JSON.parse(data)

              if(data.status == 'True'){
                $('#myModal').modal('hide');



                let_html = '<option value="' + data.id + '" selected>' + data.value + '</option>'

                $('#consignor').append(let_html);




              }

              else{


                var a = JSON.parse(data.error)

                $.each(a, function(i, val) {

                    $("#consignor_form_error").append( "<li> <strong>" + i + "</strong> &nbsp;&nbsp;" + val[0].message + "</li>"); //append results to element
                    })

              }
            }
        });
    })

    document.getElementById('article_form').addEventListener('submit', function(evt){

        evt.preventDefault();


        var data = $('#article_form').serialize();

        $.ajax({
            type: "POST",
            url: "{% url 'add_article_ajax' %}",
            data : $(this).serialize(),
            success: function (data) {   // `data` is from `get_topics_ajax` view function

                var data = JSON.parse(data)

              if(data.status == 'True'){
                $('#myModal_article').modal('hide');
                console.log(data)



                console.log('----------------')


                let_html = '<option value="' + data.id + '" selected>' + data.value + '</option>'

                $('#article').append(let_html);



              }

              else{


                var a = JSON.parse(data.error)

                $.each(a, function(i, val) {

                    $("#article_form_error").append( "<li> <strong>" + i + "</strong> &nbsp;&nbsp;" + val[0].message + "</li>"); //append results to element
                    })

              }
            }
        });
    })

    document.getElementById('truck_details_form').addEventListener('submit', function(evt){

        evt.preventDefault();

        var data = $('#truck_details_form').serialize();

        $.ajax({
            type: "POST",
            url: "{% url 'add_truck_details_ajax' %}",
            data : $(this).serialize(),
            success: function (data) {   // `data` is from `get_topics_ajax` view function

                data1 = data
                var data = JSON.parse(data)

                if(data.status == 'True'){
                    $('#myModal_truck_details').modal('hide');

                    let_html = '<option value="' + data.id + '" selected>' + data.value + '</option>'

                    $('#truck_details').append(let_html);

                    let_html = '<option value="' + data.owner_id + '" selected>' + data.owner_name + '</option>'
                    $('#truck_owner').append(let_html);


                }
                else{


                    var a = JSON.parse(data.error)

                    $.each(a, function(i, val) {

                        $("#truck_details_form_error").append( "<li> <strong>" + i + "</strong> &nbsp;&nbsp;" + val[0].message + "</li>"); //append results to element
                        })

                  }

                }
            });
        })

    document.getElementById('truc_owner_Form').addEventListener('submit', function(evt){

        evt.preventDefault();

        var data = $('#truc_owner_Form').serialize();

        $.ajax({
            type: "POST",
            url: "{% url 'add_truck_owner_ajax' %}",
            data : $(this).serialize(),
            success: function (data) {   // `data` is from `get_topics_ajax` view function
                console.log(data)
                var data = JSON.parse(data)

                if(data.status == 'True'){
                    $('#myModal_truck_owner').modal('hide');

                    let_html = '<option value="' + data.id + '" selected>' + data.value + '</option>'

                    $('select[name="truck_owner"]').append(let_html);



                }
                else{


                    var a = JSON.parse(data.error)

                    $.each(a, function(i, val) {

                        $("#truc_owner_Form_error").append( "<li> <strong>" + i + "</strong> &nbsp;&nbsp;" + val[0].message + "</li>"); //append results to element
                        })

                  }
                }
            });
        })

    document.getElementById('taluka_form').addEventListener('submit', function(evt){

        evt.preventDefault();


        var data = $('#taluka_form').serialize();

        $.ajax({
            type: "POST",
            url: "{% url 'add_taluka_ajax' %}",
            data : $(this).serialize(),
            success: function (data) {   // `data` is from `get_topics_ajax` view function
                console.log(data)
                var data = JSON.parse(data)

                if(data.status == 'True'){
                    $('#myModal_taluka').modal('hide');

                    let_html = '<option value="' + data.id + '" selected>' + data.value + '</option>'

                    $('#taluka').append(let_html);

                    let_html = '<option value="' + data.district_id + '" selected>' + data.district_name + '</option>'
                    $('#district').append(let_html);


                }
                else{


                    var a = JSON.parse(data.error)

                    console.log(a)

                    $.each(a, function(i, val) {

                        $("#taluka_form_error").append( "<li> <strong>" + i + "</strong> &nbsp;&nbsp;" + val[0].message + "</li>"); //append results to element
                        })

                  }
                }
            });
        })

    document.getElementById('district_form').addEventListener('submit', function(evt){

        evt.preventDefault();


        var data = $('#district_form').serialize();

        $.ajax({
            type: "POST",
            url: "{% url 'add_district_ajax' %}",
            data : $(this).serialize(),
            success: function (data) {   // `data` is from `get_topics_ajax` view function
                console.log(data)
                var data = JSON.parse(data)

                if(data.status == 'True'){
                    $('#myModal_district').modal('hide');

                }
                else{


                    var a = JSON.parse(data.error)

                    $.each(a, function(i, val) {

                        $("#district_form_error").append( "<li> <strong>" + i + "</strong> &nbsp;&nbsp;" + val[0].message + "</li>"); //append results to element
                        })

                  }
                }
            });
        })




    document.getElementById('station_Form').addEventListener('submit', function(evt){

        evt.preventDefault();


        var data = $('#station_Form').serialize();

        $.ajax({
            type: "POST",
            url: "{% url 'add_station_ajax' %}",
            data : $(this).serialize(),
            success: function (data) {   // `data` is from `get_topics_ajax` view function
                console.log(data)
                var data = JSON.parse(data)

                if(data.status == 'True'){
                    $('#myModal_station').modal('hide');

                    let_html = '<option value="' + data.id + '" selected>' + data.value + '</option>'


                    $('#station_to').append(let_html);

                    document.getElementById("taluka").value = data.taluka;
                    document.getElementById("district").value = data.district;

                }
                else{


                    var a = JSON.parse(data.error)

                    $.each(a, function(i, val) {

                        $("#station_Form_error").append( "<li> <strong>" + i + "</strong> &nbsp;&nbsp;" + val[0].message + "</li>"); //append results to element
                        })

                  }
                }
            });
        })




    document.getElementById('from_station_Form').addEventListener('submit', function(evt){

        evt.preventDefault();


        var data = $('#from_station_Form').serialize();

        $.ajax({
            type: "POST",
            url: "{% url 'add_from_station_ajax' %}",
            data : $(this).serialize(),
            success: function (data) {   // `data` is from `get_topics_ajax` view function
                console.log(data)
                var data = JSON.parse(data)

                if(data.status == 'True'){
                    $('#myModal_from_station').modal('hide');

                    let_html = '<option value="' + data.id + '" selected>' + data.value + '</option>'

                    $('#station_from').append(let_html);



                }
                else{


                    var a = JSON.parse(data.error)

                    $.each(a, function(i, val) {

                        $("#from_station_Form_error").append( "<li> <strong>" + i + "</strong> &nbsp;&nbsp;" + val[0].message + "</li>"); //append results to element
                        })

                  }
                }
            });
        })




    document.getElementById('onaccount_Form').addEventListener('submit', function(evt){

        evt.preventDefault();


        var data = $('#onaccount_Form').serialize();

        $.ajax({
            type: "POST",
            url: "{% url 'add_onaccount_ajax' %}",
            data : $(this).serialize(),
            success: function (data) {   // `data` is from `get_topics_ajax` view function
                console.log(data)
                var data = JSON.parse(data)

                if(data.status == 'True'){
                    $('#myModal_onaccount').modal('hide');

                    let_html = '<option value="' + data.id + '" selected>' + data.value + '</option>'

                    $('#onaccount').append(let_html);


                }
                else{


                    var a = JSON.parse(data.error)

                    $.each(a, function(i, val) {

                        $("#onaccount_Form_error").append( "<li> <strong>" + i + "</strong> &nbsp;&nbsp;" + val[0].message + "</li>"); //append results to element
                        })

                  }
                }
            });
        })






    document.querySelectorAll('.form-control').forEach(item => item.classList.remove('form-control'));




    $("#district").css("pointer-events","none");

    document.getElementById("balance").readOnly = true


    $('#article').change(function(){
        $('#truck_details').select2('open');
    })

    $('#station_from').change(function(){
        $('#station_to').select2('open');
    })



    $(document).on('keyup keypress', 'form input[type="text"], input[type="number"]', function(e) {
        if(e.which == 13) {
          e.preventDefault();

          return false;
        }
      });


      const inputEl = document.getElementById("consignee");

      inputEl.addEventListener("keyup", manageEnter);

      function manageEnter(evt) {
        evt.preventDefault();
        if (evt.keyCode === 13) {
            $('#onaccount').select2('open');

        }
      }


      $('#onaccount').change(function(){



        document.getElementById("bags").focus();


      })


      $('#id_DC_date').change(function(){


        document.getElementById("bags").focus();


      })


      const inputE2 = document.getElementById("id_mobile_no");

      inputE2.addEventListener("keyup", manageEnter2);

      function manageEnter2(evt) {
        evt.preventDefault();
        if (evt.keyCode === 13) {
            $('#bags').focus();

        }
      }

      const inputE3 = document.getElementById("bags");

      inputE3.addEventListener("keyup", manageEnter3);

      function manageEnter3(evt) {
        evt.preventDefault();
        if (evt.keyCode === 13) {
            $('#delivery_no').focus();

        }
      }

      const inputE4 = document.getElementById("delivery_no");

      inputE4.addEventListener("keyup", manageEnter4);

      function manageEnter4(evt) {
        evt.preventDefault();
        if (evt.keyCode === 13) {
            $('#rate').focus();

        }
      }


      const inputE5 = document.getElementById("rate");

      inputE5.addEventListener("keyup", manageEnter5);

      function manageEnter5(evt) {
        evt.preventDefault();
        if (evt.keyCode === 13) {
            $('#less_advance').focus();

        }
      }

      const inputE6 = document.getElementById("less_advance");

      inputE6.addEventListener("keyup", manageEnter6);

      function manageEnter6(evt) {
        evt.preventDefault();
        if (evt.keyCode === 13) {

            $('#petrol_pump').select2('open');

        }
      }



      $('#petrol_pump').change(function(){


        document.getElementById('diesel').focus();


       })



//-----------------------------------------------------------


    let global_mt = 0
    let global_freight = 0

    bags.addEventListener("input", function (e) {

        let bags = this.value;

        {% if request.user.username == "deepak" %}

        if(document.getElementById('deepak').checked) {

            global_mt = parseFloat(bags) / 25;
            global_mt = Math.round(global_mt * 100) / 100;

            document.getElementById("mt").value = global_mt.toFixed(2);

        }

        else{





        global_mt = parseFloat(bags) / 20;
        global_mt = Math.round(global_mt * 100) / 100;

        document.getElementById("mt").value = global_mt.toFixed(2);

        }

        {% else %}

        global_mt = parseFloat(bags) / 20;
        global_mt = Math.round(global_mt * 100) / 100;

        document.getElementById("mt").value = global_mt.toFixed(2);

        {% endif %}



        rate = document.getElementById('rate').value;

        global_freight =  parseFloat((global_mt * rate).toFixed(2));

        document.getElementById("freight").value = global_freight;



        let less_advance = document.getElementById('less_advance').value;
        let less_freight = document.getElementById('freight').value;


        let balance = parseFloat((global_freight - less_advance).toFixed(2));

        if (balance >= 0){

            document.getElementById("balance").value = balance;


        }else if(rate != 0 && rate != undefined && rate != '' ){

            document.getElementById("balance").value = balance;


        }
        else{
            document.getElementById("balance").value = 0.0;

        }

    });


    rate.addEventListener("input", function (e) {


        let rate = this.value;

        global_freight =  parseFloat((global_mt * rate).toFixed(2));

        document.getElementById("freight").value = global_freight;


        let less_advance = document.getElementById('less_advance').value;
        let less_freight = document.getElementById('freight').value;

        let balance = parseFloat((global_freight - less_advance).toFixed(2));

        if (balance >= 0){

            document.getElementById("balance").value = balance;


        }else if(rate != 0 && rate != undefined && rate != '' ){

            document.getElementById("balance").value = balance;


        }
        else{
            document.getElementById("balance").value = 0.0;

        }

    });





    less_advance.addEventListener("input", function (e) {


        let less_advance = document.getElementById('less_advance').value;
        let less_freight = document.getElementById('freight').value;

        let rate = document.getElementById('rate').value;

        let balance = parseFloat((global_freight - less_advance).toFixed(2));

        if (balance >= 0){

            document.getElementById("balance").value = balance;


        }else if(rate != 0 && rate != undefined && rate != '' ){

            document.getElementById("balance").value = balance;


        }
        else{
            document.getElementById("balance").value = 0.0;

        }
    });





    $('.sele').select2();



    {% if request.user.username == "deepak" %}

    function adjust_mt(){


        bags = document.getElementById("bags").value;

        if(document.getElementById('deepak').checked) {

            global_mt = parseFloat(bags) / 25;
            global_mt = Math.round(global_mt * 100) / 100;

            document.getElementById("mt").value = global_mt.toFixed(2);

        }

        else{



        global_mt = parseFloat(bags) / 20;
        global_mt = Math.round(global_mt * 100) / 100;

        document.getElementById("mt").value = global_mt.toFixed(2);

        }


    }

    {% endif %}


</script>

{% endblock js %}
